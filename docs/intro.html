

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; OPPPY 0.1.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="OPPPY 0.1.2 documentation" href="index.html"/>
        <link rel="next" title="opppy package" href="opppy.html"/>
        <link rel="prev" title="Welcome to OPPPY’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> OPPPY
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#important-data-formats">Important Data Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-defined-opppy-parsers">User defined OPPPY parsers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cycle-string-parser">cycle_string_parser -</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cycle-tally-parser">cycle_tally_parser -</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dump-parser">dump_parser -</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-opppy-python-data-dictionaries">Building OPPPY Python Data Dictionaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-building-an-output-data-dictionary">Example: Building an output_data dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-building-a-dump-data-dictionary">Example: Building a dump_data dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-building-a-tally-data-dictionary">Example: Building a tally_data dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-an-interactive-commandline-opppy-ploter">Building an Interactive Commandline OPPPY Ploter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="opppy.html">opppy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">tests package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OPPPY</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#getting-started" id="id1">Getting Started</a><ul>
<li><a class="reference internal" href="#important-data-formats" id="id2">Important Data Formats</a></li>
<li><a class="reference internal" href="#user-defined-opppy-parsers" id="id3">User defined OPPPY parsers</a></li>
<li><a class="reference internal" href="#building-opppy-python-data-dictionaries" id="id4">Building OPPPY Python Data Dictionaries</a></li>
<li><a class="reference internal" href="#building-an-interactive-commandline-opppy-ploter" id="id5">Building an Interactive Commandline OPPPY Ploter</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="getting-started">
<h1><a class="toc-backref" href="#id1">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>The following sections provide a detailed over view of the expected data
formates used by OPPPY and how to write basic OPPPY parser classes to extract
and build python data dictionaries that can be used by the OPPPY plotting functions.</p>
<div class="section" id="important-data-formats">
<h2><a class="toc-backref" href="#id2">Important Data Formats</a><a class="headerlink" href="#important-data-formats" title="Permalink to this headline">¶</a></h2>
<p>The OPPPY library provides support for three different types of output data
(cycle_data, output_data, tally_data, dump_data). The OPPPY library parses these different
data types and places them in unique Python data structures to make them easy
to plot:</p>
<blockquote>
<div><ul>
<li><p class="first">cycle_info - A Python dictionary with sub-dictionary data that can be used
to sort/order ‘cycle_data’</p>
<ul>
<li><p class="first">This is a sub-dictionary data type that is used to sort ‘cycle_data’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cycle_info</span><span class="o">=</span><span class="p">{}</span>

<span class="c1"># populate some example cycle info</span>
<span class="n">cycle_info</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="n">cycle_info</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="mf">1.0</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cycle_info</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">cycle_data (or tally_cycle_data) - A Python dictionary with sub-dictionaries the define unique cycle data.</p>
<ul>
<li><p class="first">This data type is used to build up the corresponding OPPPY output_data
or tally_data types for plotting. For example here is an example of what
cycle_data and tally_cycle_data should look like for a simple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">cycle_data</span><span class="o">=</span><span class="p">{}</span>

<span class="c1"># populate cycle data</span>
<span class="n">cycle_info_dict</span><span class="o">=</span><span class="p">{}</span>
<span class="n">cycle_info_dict</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">cycle_info_dict</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1"># there must be a &#39;cycle_info&#39; dictionary used to order the cycle data</span>
<span class="n">cycle_data</span><span class="p">[</span><span class="s1">&#39;cycle_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info_dcit</span>
<span class="n">time_step_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">time_step_dict</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">cycle_data</span><span class="p">[</span><span class="s1">&#39;time_step&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">time_step_dict</span>
<span class="n">n_cells_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">n_cells_dict</span><span class="p">[</span><span class="s1">&#39;ncells&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">cycle_data</span><span class="p">[</span><span class="s1">&#39;cell_count&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">n_cells_dict</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cycle_data</span><span class="p">)</span>

<span class="c1"># we additionaly use tally cycle_data that is in the same formate only</span>
<span class="c1"># contains arrays of data</span>
<span class="n">tally_cycle_data</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># there must be a &#39;cycle_info&#39; dictionary used to order the cycle data</span>
<span class="n">cycle_info_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">cycle_info_dict</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">cycle_info_dict</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">tally_cycle_data</span><span class="p">[</span><span class="s1">&#39;cycle_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info_dict</span>
<span class="c1"># load up a data dictionary</span>
<span class="n">counts_dict_1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;bins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">tally_cycle_data</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts_dict_1</span>
<span class="c1"># there must be a &#39;problem_data&#39; dictionary with cycle_info_keys and</span>
<span class="c1"># subkeys associated with the cycle dictionaries</span>
<span class="n">problem_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info_keys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>
<span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">,</span><span class="s1">&#39;even_counts&#39;</span><span class="p">,</span><span class="s1">&#39;bins&#39;</span><span class="p">]</span>
<span class="n">tally_cycle_data</span><span class="p">[</span><span class="s1">&#39;problem_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">problem_data_dict</span>
<span class="c1"># load up some more tally_cycle_data</span>
<span class="n">tally_cycle_data</span><span class="p">[</span><span class="s1">&#39;n_odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">])</span>
<span class="n">tally_cycle_data</span><span class="p">[</span><span class="s1">&#39;n_even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">tally_cycle_data</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">output_data - Time/cycle dependent scalar information (i.e. dt, total_energy, etc..)</p>
<ul>
<li><p class="first">This data is parsed into a Python dictionary of sub-dictionaries of
interest. Each sub-dictionary contains a set of unique (1d) x (i.e. time or
cycle) and y (i.e. dt or ncells) dictionaries to be used for plotting.
The OPPPY library generally constructs this data using a series of
‘cycle_data’ python dictionaries. However, for this simple example we
will build it directly to show what the expected data structure looks
like.  For example an output that only prints the time step size and
number of cells every cycle could have a dictionary that looks like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">cycles</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">times</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">])</span>
<span class="n">dt</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
<span class="n">ncells</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>

<span class="c1"># populate the time step dictionary</span>
<span class="n">time_step_subdictionary</span><span class="o">=</span><span class="p">{}</span>
<span class="n">time_step_subdictionary</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">times</span>
<span class="n">time_step_subdictionary</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">cycles</span>
<span class="n">time_step_subdictionary</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dt</span>

<span class="c1"># populate the cell count dictionary</span>
<span class="n">cell_count_subdictionary</span><span class="o">=</span><span class="p">{}</span>
<span class="n">cell_count_subdictionary</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">times</span>
<span class="n">cell_count_subdictionary</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">cycles</span>
<span class="n">cell_count_subdictionary</span><span class="p">[</span><span class="s1">&#39;ncells&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">ncells</span>

<span class="c1"># populate the output dictionary</span>
<span class="n">output_data</span><span class="o">=</span><span class="p">{}</span>
<span class="n">output_data</span><span class="p">[</span><span class="s1">&#39;time_step&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">time_step_subdictionary</span>
<span class="n">output_data</span><span class="p">[</span><span class="s1">&#39;cell_count&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">time_step_subdictionary</span>

<span class="nb">print</span><span class="p">(</span><span class="n">output_data</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">tally_data - Time/cycle dependent (n-dimensional) data</p>
<ul>
<li><p class="first">This data stores a dictionary of series_data that is directly associated
with a dictionary of a list of tally_cycle_data. There are functions to
build up a tally_data object using tally_cycle_data in opppy.tally. Here
we will just build up a repsenative example of a tally_data object that
can be used for plotting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># initialize the tally data dictionary</span>
<span class="n">tally_data</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># there must be a &#39;problem_data&#39; dictionary with cycle_info_keys and</span>
<span class="c1"># subkeys associated with the cycle dictionaries</span>
<span class="n">problem_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info_keys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>
<span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">,</span><span class="s1">&#39;even_counts&#39;</span><span class="p">,</span><span class="s1">&#39;bins&#39;</span><span class="p">]</span>
<span class="n">tally_data</span><span class="p">[</span><span class="s1">&#39;problem_data&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">problem_data_dict</span>

<span class="c1"># Here is what valid series data looks like</span>
<span class="n">tally_data</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">tally_data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>

<span class="c1"># lets build up an example tally_cycle_data list associated with the</span>
<span class="c1"># series data</span>
<span class="n">tally_cycle_data_list</span> <span class="o">=</span> <span class="p">[]</span>


<span class="c1"># load up cycle 1 counts</span>
<span class="c1"># build an example count dictionary</span>
<span class="n">counts_dict_1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;bins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="n">tally_cycle_data_1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">tally_cycle_data_1</span><span class="p">[</span><span class="s1">&#39;n_odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">])</span>
<span class="n">tally_cycle_data_1</span><span class="p">[</span><span class="s1">&#39;n_even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_1</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">])</span>
<span class="n">tally_cycle_data_1</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts_dict_1</span>
<span class="c1"># append to the tally_cycle_data_list</span>
<span class="n">tally_cycle_data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally_cycle_data_1</span><span class="p">)</span>

<span class="c1"># load up cycle 2 counts</span>
<span class="c1"># build an example count dictionary</span>
<span class="n">counts_dict_2</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">counts_dict_2</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>
<span class="n">counts_dict_2</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="n">counts_dict_2</span><span class="p">[</span><span class="s1">&#39;bins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="n">tally_cycle_data_2</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">tally_cycle_data_2</span><span class="p">[</span><span class="s1">&#39;n_odd_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_2</span><span class="p">[</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">])</span>
<span class="n">tally_cycle_data_2</span><span class="p">[</span><span class="s1">&#39;n_even_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict_2</span><span class="p">[</span><span class="s1">&#39;even_counts&#39;</span><span class="p">])</span>
<span class="n">tally_cycle_data_2</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts_dict_2</span>
<span class="c1"># append to the tally_cycle_data_list</span>
<span class="n">tally_cycle_data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally_cycle_data_2</span><span class="p">)</span>

<span class="c1"># there must be a tally_cycle_data dictionary in every tally_data dictionary</span>
<span class="n">tally_data</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tally_cycle_data_list</span>

<span class="nb">print</span><span class="p">(</span><span class="n">tally_data</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">dump_data - Complete checkpoint (n-dimensional) data typically used for code restarts</p>
<ul>
<li><p class="first">This data is parsed into a python dictionary of sub-dictionaries
associated with a single dump file. The sub-dictionaries are associated
with a single dump file and contain unique arrays of values that can be
plotted in multiple dimensions. Lets consider a two dimensional series of
dumps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">dumps</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># build the first dump dictionary</span>
<span class="n">dump_1_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="n">dump_1_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">dumps</span><span class="p">[</span><span class="s1">&#39;dump_1&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dump_1_dict</span>

<span class="c1"># build the second dump dictionary</span>
<span class="n">dump_2_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">])</span>
<span class="n">dump_2_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
<span class="n">dumps</span><span class="p">[</span><span class="s1">&#39;dump_2&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dump_2_dict</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dumps</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div></blockquote>
<p>These Python data structures can then be plotted using OPPPY plotting tools.</p>
</div>
<div class="section" id="user-defined-opppy-parsers">
<h2><a class="toc-backref" href="#id3">User defined OPPPY parsers</a><a class="headerlink" href="#user-defined-opppy-parsers" title="Permalink to this headline">¶</a></h2>
<p>The OPPPY library provides a set of functions to make building these Python
data (output_data, tally_data, dump_data) structures easier. To make this tool
flexible enough to accommodate any unique output type it requires users to
define unique opppy_parsers for their projects. There are two types of
opppy_parsers (cycle_string_parsers and dump_parsers).</p>
<div class="section" id="cycle-string-parser">
<h3>cycle_string_parser -<a class="headerlink" href="#cycle-string-parser" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>This user defined python parser class requires 5 main python attributes:</dt>
<dd><ul class="first last simple">
<li>A python string called ‘sort_key_string’ to sort the data based on the
dictionary values in the ‘cycle_info’ sub-dictionary available in every
‘cycle_data’ dictionary.</li>
<li>A python string called ‘cycle_opening_string’ to indicate how a cycle string begins</li>
<li>A python string called ‘cycle_ending_string’ to indicate how a cycle string ends</li>
<li>A python string called ‘file_end_string’ to indicate the successful end of a file<ul>
<li>This can be defaulted to file_end_string=None which assumes all
valid cycles end with a ‘cycle_end_string’</li>
</ul>
</li>
<li>An associated python function called ‘parse_cycle_string’ that takes a
full cycle string and generates a ‘cycle_data’ dictionary (defined in the
Important Data Formats section).<ul>
<li>This function takes a python ‘cycle_string’ as input.</li>
<li>this function returns either a ‘cycle_data’ python dictionary<ul>
<li>The cycle_data must contain a ‘cycle_info’ sub-dictionary with a data value
corresponding to the ‘sort_key_string’ defined by the user.</li>
</ul>
</li>
</ul>
</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="cycle-tally-parser">
<h3>cycle_tally_parser -<a class="headerlink" href="#cycle-tally-parser" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>This user defined python parser class requires 5 main python attributes:</dt>
<dd><ul class="first last simple">
<li>A python string called ‘sort_key_string’ to sort the data based on the
dictionary values in the ‘cycle_info’ sub-dictionary available in every
‘tally_cycle_data’ dictionary.</li>
<li>A python string called ‘cycle_opening_string’ to indicate how a cycle string begins</li>
<li>A python string called ‘cycle_ending_string’ to indicate how a cycle string ends</li>
<li>A python string called ‘file_end_string’ to indicate the successful end of a file<ul>
<li>This can be defaulted to file_end_string=None which assumes all
valid cycles end with a ‘cycle_end_string’</li>
</ul>
</li>
<li>An associated python function called ‘parse_cycle_string’ that takes a
full cycle string and generates a ‘cycle_tally_data’ dictionary (defined in
the Important Data Formats section).<ul>
<li>This function takes a python ‘cycle_string’ as input.</li>
<li>this function returns either a ‘tally_cycle_data’ python dictionary<ul>
<li>This tally_cycle_data contains an arbitrary number of tally data dictionaries.</li>
<li>The tally_cycle_data must contain a ‘cycle_info’ sub-dictionary with a data value
corresponding to the ‘sort_key_string’ defined by the user.</li>
<li>The tally_cycle_data must contain a ‘problem_data’ dictionary that
contains a ‘cycle_info_keys’ dictionary entry with a list of valid
‘sort_key_strings’. ‘problem_data’ also must contain a dictionary entry
for every corresponding tally data dictionary. This ‘problem_data’
dictionary entry must contain a list of sub associated with the
corresponding tally data dictionary.</li>
</ul>
</li>
</ul>
</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="dump-parser">
<h3>dump_parser -<a class="headerlink" href="#dump-parser" title="Permalink to this headline">¶</a></h3>
<p>This user defined python parser class requires 1 main python
attributes:</p>
<blockquote>
<div><ul class="simple">
<li>An associated python function called ‘build_data_dictionary’ that builds a
‘dump_data’ dictionary from a user provided filename.<ul>
<li>This function takes a string ‘filename’ used to open the dump file to be parsed</li>
<li>This function takes an optional list of ‘dump_keys’ string used to
extract a subset of user defined data from the dump file</li>
<li>This function returns a ‘dump_data’ dictionary for plotting.</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="building-opppy-python-data-dictionaries">
<h2><a class="toc-backref" href="#id4">Building OPPPY Python Data Dictionaries</a><a class="headerlink" href="#building-opppy-python-data-dictionaries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="example-building-an-output-data-dictionary">
<h3>Example: Building an output_data dictionary<a class="headerlink" href="#example-building-an-output-data-dictionary" title="Permalink to this headline">¶</a></h3>
<p>In this example we will build up an example output_data dictionary using an
example user defined opppy_parser.</p>
<p>For demonstrative purposes we define a set of simple output text files.</p>
<p>output_example1.txt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cycle 1</span>
<span class="n">time</span> <span class="mi">1</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">10</span>
<span class="c1"># cycle 2</span>
<span class="n">time</span> <span class="mi">2</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">20</span>
<span class="c1"># cycle 3</span>
<span class="n">time</span> <span class="mi">3</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">30</span>
<span class="c1"># cycle 4</span>
<span class="n">time</span> <span class="mi">4</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">40</span>
<span class="c1">#</span>
</pre></div>
</div>
<p>output_example2.txt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cycle 5</span>
<span class="n">time</span> <span class="mi">5</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">50</span>
<span class="c1"># cycle 6</span>
<span class="n">time</span> <span class="mi">6</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">60</span>
<span class="c1"># cycle 7</span>
<span class="n">time</span> <span class="mi">7</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">70</span>
<span class="n">back_fill_data</span> <span class="o">=</span> <span class="mf">7.1</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">7.1</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">14.1</span>
<span class="c1"># cycle 8</span>
<span class="n">time</span> <span class="mi">8</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">80</span>
<span class="n">back_fill_data</span> <span class="o">=</span> <span class="mf">8.2</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">8.2</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">16.2</span>
<span class="c1">#</span>
</pre></div>
</div>
<p>output_example3.txt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cycle 9</span>
<span class="n">time</span> <span class="mi">9</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">90</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">9.3</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">18.3</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat3</span><span class="p">)</span> <span class="o">=</span> <span class="mf">27.3</span>
<span class="c1"># cycle 10</span>
<span class="n">time</span> <span class="mi">10</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">100</span>
<span class="c1"># cycle 11</span>
<span class="n">time</span> <span class="mi">11</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">110</span>
<span class="n">back_fill_data</span> <span class="o">=</span> <span class="mf">11.4</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">11.4</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">22.4</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat4</span><span class="p">)</span> <span class="o">=</span> <span class="mf">44.4</span>
<span class="c1"># cycle 12</span>
<span class="n">time</span> <span class="mi">12</span>
<span class="n">test_data1</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">test_data2</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">back_fill_data</span> <span class="o">=</span> <span class="mf">12.5</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">12.5</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">24.5</span>
<span class="n">density</span><span class="p">(</span><span class="n">mat3</span><span class="p">)</span> <span class="o">=</span> <span class="mf">36.5</span>
<span class="c1">#</span>
</pre></div>
</div>
<p>Given this simple output formate we can define the following example (‘cycle_string_parser’) OPPPY
output parser my_test_opppy_parser.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a simple example opppy parser</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">class</span> <span class="nc">my_test_opppy_parser</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    An example OPPPY parser that can extract simple cycle string</span>
<span class="sd">    data and return a cycle dictionary</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="c1"># initialize the cycle parsing data</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">sort_key_string</span> <span class="o">=</span> <span class="s1">&#39;time&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">cycle_opening_string</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">cycle_closing_string</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">file_end_string</span> <span class="o">=</span> <span class="kc">None</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initializing my_test_opppy_parser&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse_cycle_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cycle_string</span><span class="p">):</span>
      <span class="c1"># return dictionary of dictionaries </span>
      <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="c1"># initial internal dictionaries</span>
      <span class="n">problem_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">cycle_info</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">test_data1</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">test_data2</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">back_fill_data</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">density_data</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">cycle_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;cycle&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
          <span class="n">cycle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;# cycle &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
          <span class="n">cycle_info</span><span class="p">[</span><span class="s1">&#39;cycle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle</span>
          <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info</span> 
        <span class="k">if</span> <span class="s2">&quot;time&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
          <span class="n">time</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;time &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
          <span class="n">cycle_info</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span>
          <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info</span>
        <span class="k">if</span> <span class="s2">&quot;test_data1&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
          <span class="n">split_string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
          <span class="n">test_data1</span><span class="p">[</span><span class="n">split_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">split_string</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;test_data1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_data1</span>
        <span class="k">if</span> <span class="s2">&quot;test_data2&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
          <span class="n">split_string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
          <span class="n">test_data2</span><span class="p">[</span><span class="n">split_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">split_string</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;test_data2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_data2</span>
        <span class="k">if</span> <span class="s2">&quot;back_fill_data&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
          <span class="n">split_string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
          <span class="n">back_fill_data</span><span class="p">[</span><span class="n">split_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">split_string</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;back_fill_data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">back_fill_data</span>
        <span class="k">if</span> <span class="s2">&quot;density&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
            <span class="n">density</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> 
            <span class="n">mat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[(|)]&#39;</span><span class="p">,</span><span class="n">string</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">density_data</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span> <span class="o">=</span> <span class="n">density</span>

      <span class="c1"># append dictionary with multiple entries</span>
      <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">density_data</span>




      <span class="k">return</span> <span class="n">data_dict</span>
        
</pre></div>
</div>
<p>We can now build output_data dictionary using the opppy.output functions and plot the results using opppy.plot_dictionary functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env pyton</span>
<span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   test_dict_plotting.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="k">import</span> <span class="n">support</span>
<span class="kn">import</span> <span class="nn">shlex</span>

<span class="kn">from</span> <span class="nn">opppy.output</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.plot_dictionary</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.version</span> <span class="k">import</span> <span class="n">__version__</span>

<span class="k">class</span> <span class="nc">test_dict_plotting</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
 
  <span class="k">def</span> <span class="nf">test_plot_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This test the append_pickle function</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">from</span> <span class="nn">my_test_opppy_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_parser</span>

    <span class="c1"># initialize the parser</span>
    <span class="n">opppy_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_parser</span><span class="p">()</span>
  
    <span class="c1"># initialize a new data dictionary</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
  
    <span class="c1"># Append the thrid output file</span>
    <span class="n">output_files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;output_example1.txt&quot;</span><span class="p">,</span><span class="s2">&quot;output_example2.txt&quot;</span><span class="p">,</span><span class="s2">&quot;output_example3.txt&quot;</span><span class="p">]</span>
    <span class="c1"># Build initial pickle</span>
    <span class="n">append_output_dictionary</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">opppy_parser</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    
    <span class="n">ploter</span> <span class="o">=</span> <span class="n">plot_dictionary</span><span class="p">()</span>

    <span class="n">plot_string</span> <span class="o">=</span> <span class="s2">&quot;-dn density -y mat1 -x time -sa test.png --hide_plot&quot;</span>

    <span class="c1"># generate the plotting arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>
    
    <span class="c1"># check if data is available </span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available &quot;</span><span class="p">,</span><span class="n">ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

    <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
    <span class="n">ploter</span><span class="o">.</span><span class="n">plot_dict</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="p">[</span><span class="n">data</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;my_test_dict&quot;</span><span class="p">])</span>


    


<span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
  <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">test_dict_plotting</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">test_main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="example-building-a-dump-data-dictionary">
<h3>Example: Building a dump_data dictionary<a class="headerlink" href="#example-building-a-dump-data-dictionary" title="Permalink to this headline">¶</a></h3>
<p>For demonstrative purposes we define a simple set of dump files in text format:</p>
<p>example_dump.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span> <span class="n">time</span> <span class="n">cell_id</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">density</span> <span class="n">temperature</span> <span class="n">pressure</span>

<span class="n">time</span><span class="p">:</span> <span class="mf">1.0</span>

<span class="n">cell_id</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="n">y</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> 
<span class="n">z</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="n">density</span><span class="p">:</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">1.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> <span class="mf">2.1</span> 
<span class="n">temperature</span><span class="p">:</span> <span class="mf">3.1</span> <span class="mf">3.1</span> <span class="mf">3.1</span> <span class="mf">3.1</span> <span class="mf">3.1</span> <span class="mf">4.1</span> <span class="mf">4.1</span> <span class="mf">4.1</span> <span class="mf">4.1</span> <span class="mf">4.1</span> <span class="mf">13.1</span> <span class="mf">13.1</span> <span class="mf">13.1</span> <span class="mf">13.1</span> <span class="mf">13.1</span> <span class="mf">14.1</span> <span class="mf">14.1</span> <span class="mf">14.1</span> <span class="mf">14.1</span> <span class="mf">10.1</span>
<span class="n">pressure</span><span class="p">:</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">5.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span> <span class="mf">6.1</span>

</pre></div>
</div>
<p>example_dump2.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span> <span class="n">time</span> <span class="n">cell_id</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">density</span> <span class="n">temperature</span> <span class="n">pressure</span>

<span class="n">time</span><span class="p">:</span> <span class="mf">2.0</span>

<span class="n">cell_id</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="n">y</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> 
<span class="n">z</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="n">density</span><span class="p">:</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">1.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> <span class="mf">2.2</span> 
<span class="n">temperature</span><span class="p">:</span> <span class="mf">3.2</span> <span class="mf">3.2</span> <span class="mf">3.2</span> <span class="mf">3.2</span> <span class="mf">3.2</span> <span class="mf">4.2</span> <span class="mf">4.2</span> <span class="mf">4.2</span> <span class="mf">4.2</span> <span class="mf">4.2</span> <span class="mf">13.2</span> <span class="mf">13.2</span> <span class="mf">13.2</span> <span class="mf">13.2</span> <span class="mf">13.2</span> <span class="mf">14.2</span> <span class="mf">14.2</span> <span class="mf">14.2</span> <span class="mf">14.2</span> <span class="mf">20.2</span>
<span class="n">pressure</span><span class="p">:</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">5.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span> <span class="mf">6.2</span>

</pre></div>
</div>
<p>example_dump3.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span> <span class="n">time</span> <span class="n">cell_id</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">density</span> <span class="n">temperature</span> <span class="n">pressure</span>

<span class="n">time</span><span class="p">:</span> <span class="mf">3.0</span>

<span class="n">cell_id</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="n">y</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> 
<span class="n">z</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="n">density</span><span class="p">:</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">1.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> <span class="mf">2.3</span> 
<span class="n">temperature</span><span class="p">:</span> <span class="mf">3.3</span> <span class="mf">3.3</span> <span class="mf">3.3</span> <span class="mf">3.3</span> <span class="mf">3.3</span> <span class="mf">4.3</span> <span class="mf">4.3</span> <span class="mf">4.3</span> <span class="mf">4.3</span> <span class="mf">4.3</span> <span class="mf">13.3</span> <span class="mf">13.3</span> <span class="mf">13.3</span> <span class="mf">13.3</span> <span class="mf">13.3</span> <span class="mf">14.3</span> <span class="mf">14.3</span> <span class="mf">14.3</span> <span class="mf">14.3</span> <span class="mf">30.3</span>
<span class="n">pressure</span><span class="p">:</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span> <span class="mf">6.3</span>

</pre></div>
</div>
<p>Given this simple dump formate we can define the following example
(‘dump_parser’) OPPPY dump parser my_test_opppy_dump_parser.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a simple example opppy dump parser</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="o">*</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">opppy.plotting_help</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">my_test_opppy_dump_parser</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    An example OPPPY dump parser that can extract data from a simple ASCII dump file</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="c1"># initialize the cycle parsing data</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initializing my_test_opppy_dump_parser&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_data_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">dump_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">dump_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>    
        <span class="n">lines</span> <span class="o">=</span> <span class="n">dump_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">dump_keys</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">dump_keys</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;keys&quot;</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">dump_keys</span><span class="p">:</span>
                    <span class="n">keys</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">break</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">str_vector_to_float_vector</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="k">return</span> <span class="n">data</span>
        

</pre></div>
</div>
<p>We can now build up data_dump dictionary using the opppy.dump_utils functions and plot the data using the opppy.plot_dump_dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env pyton</span>
<span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   test_dump_ploter.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">PyPlot</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="k">import</span> <span class="n">support</span>

<span class="kn">from</span> <span class="nn">opppy.plot_dump_dictionary</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">test_opppy_dump_utils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_1d_dump_ploter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Thest the three different point value extraction functions</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        
        <span class="n">my_dumps</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>

        <span class="n">dump_1d_ploter</span> <span class="o">=</span> <span class="n">plot_1d_dump_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x cell_id -y temperature&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">my_dumps</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

        <span class="c1"># extract all data from the other example dump file</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump2.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">my_dumps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump3.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">my_dumps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        
        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">my_dumps</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_2d_dump_ploter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Thest the three different point value extraction functions</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        
        <span class="n">dump_2d_ploter</span> <span class="o">=</span> <span class="n">plot_2d_dump_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x x -y y -d temperature&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">dump_2d_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">dump_2d_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">dump_2d_ploter</span><span class="o">.</span><span class="n">plot_2d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_3d_dump_ploter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Thest the three different point value extraction functions</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        
        <span class="n">dump_3d_ploter</span> <span class="o">=</span> <span class="n">plot_3d_dump_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x z -y y -z x -zs 5 -d temperature&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">dump_3d_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">dump_3d_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">dump_3d_ploter</span><span class="o">.</span><span class="n">plot_3d_slice</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_point_series_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This test the ability to plot series data using the dump_1d_ploter</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump2.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump3.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="n">series_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">series_data_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">density_series_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">tracer_x</span><span class="p">,</span> <span class="n">tracer_y</span> <span class="o">=</span> <span class="n">extract_series_point</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="s2">&quot;density&quot;</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">])</span>
        <span class="c1"># add data to series dictionary</span>
        <span class="n">density_series_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_x</span><span class="p">)</span>
        <span class="n">density_series_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_y</span><span class="p">)</span>
        <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">density_series_data</span><span class="p">)</span>
        <span class="n">series_data_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;original_density&quot;</span><span class="p">)</span>

        <span class="c1"># fake a second series that has two times the density</span>
        <span class="n">density_2x_series_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">density_2x_series_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_x</span><span class="p">)</span>
        <span class="n">tracer_y</span><span class="p">[</span><span class="s2">&quot;density&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">tracer_y</span><span class="p">[</span><span class="s2">&quot;density&quot;</span><span class="p">]</span><span class="o">*</span><span class="mf">2.0</span>
        <span class="n">density_2x_series_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_y</span><span class="p">)</span>

        <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">density_2x_series_data</span><span class="p">)</span>
        <span class="n">series_data_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;2x_density&quot;</span><span class="p">)</span>

        <span class="n">dump_1d_ploter</span> <span class="o">=</span> <span class="n">plot_1d_dump_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x time -y density&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">dump_1d_ploter</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">,</span> <span class="n">series_data_names</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_line_series_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This test the ability to plot series data using the dump_1d_ploter</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump2.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump3.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_line</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="s2">&quot;temperature&quot;</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">],</span>  <span class="p">[</span><span class="mf">5.0</span><span class="p">],</span> <span class="n">npts</span><span class="o">=</span><span class="mi">5</span> <span class="p">)</span>
        <span class="n">series_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">)]</span>
        <span class="n">series_data_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;temperature_series&#39;</span><span class="p">]</span>

        <span class="n">line_series_ploter</span> <span class="o">=</span> <span class="n">plot_line_series_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x distance -y temperature -ly&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">line_series_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">line_series_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">line_series_ploter</span><span class="o">.</span><span class="n">plot_1d_series</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">,</span> <span class="n">series_data_names</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_contour_series_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This test the ability to plot series data using the dump_1d_ploter</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

        <span class="c1"># initialize my test dump parser</span>
        <span class="n">dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump.txt&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
        <span class="c1"># extract all data from the example dump file</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">)]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump2.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;example_dump3.txt&quot;</span>
        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">build_data_dictionary</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="s2">&quot;temperature&quot;</span><span class="p">,[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">npts</span><span class="o">=</span><span class="mi">5</span> <span class="p">)</span>
        <span class="n">series_data</span> <span class="o">=</span> <span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">)</span>

        <span class="n">contour_series_ploter</span> <span class="o">=</span> <span class="n">plot_2d_series_dictionary</span><span class="p">();</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x x -y y -d temperature -xlab test_x&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">))</span>

        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">plot_2d_series</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">)</span>

        <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d_slice</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="s2">&quot;temperature&quot;</span><span class="p">,[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="mf">5.0</span><span class="p">,</span> <span class="n">npts</span><span class="o">=</span><span class="mi">10</span> <span class="p">)</span>
        <span class="n">series_data</span> <span class="o">=</span> <span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">)</span>

        <span class="n">plot_string</span> <span class="o">=</span> <span class="s1">&#39;-x z -y y -d temperature -xlab test_x&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available&quot;</span><span class="p">,</span> <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">))</span>
        <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
        <span class="n">contour_series_ploter</span><span class="o">.</span><span class="n">plot_2d_series</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">)</span>


 
<span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
  <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">test_opppy_dump_utils</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">test_main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="example-building-a-tally-data-dictionary">
<h3>Example: Building a tally_data dictionary<a class="headerlink" href="#example-building-a-tally-data-dictionary" title="Permalink to this headline">¶</a></h3>
<p>For demonstrative purposes we define a simple set of tally files in text format:</p>
<p>example_tally1.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! A simple tally example
cycle: 1
time: 1.0
bins: 1 2 3 4 5
odd_counts: 1 3 5 7 9
even_counts: 2 4 6 8 10

cycle: 2
time: 2.0
bins: 1 2 3 4 5
odd_counts: 11 13 15 17 19
even_counts: 12 14 16 18 20

cycle: 3
time: 3.0
bins: 1 2 3 4 5
odd_counts: 21 23 25 27 29
even_counts: 22 24 26 28 30

</pre></div>
</div>
<p>example_tally2.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! A simple tally example
cycle: 4
time: 4.0
bins: 1 2 3 4 5
odd_counts: 31 33 35 37 39
even_counts: 32 34 36 38 40

cycle: 5
time: 5.0
bins: 1 2 3 4 5
odd_counts: 41 43 45 47 49
even_counts: 42 44 46 48 50

cycle: 6
time: 6.0
bins: 1 2 3 4 5
odd_counts: 51 53 55 57 59
even_counts: 52 54 56 58 60

</pre></div>
</div>
<p>example_tally3.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! A simple tally example
cycle: 7
time: 7.0
bins: 1 2 3 4 5
odd_counts: 61 63 65 67 69
even_counts: 62 64 66 68 70

cycle: 8
time: 8.0
bins: 1 2 3 4 5
odd_counts: 71 73 75 77 79
even_counts: 72 74 76 78 80

cycle: 9
time: 9.0
bins: 1 2 3 4 5
odd_counts: 81 83 85 87 89
even_counts: 82 84 86 88 90

</pre></div>
</div>
<p>Given this simple dump formate we can define the following example
(‘tally_parser’) OPPPY tally parser my_test_opppy_tally_parser.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a simple example opppy tally parser</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">array</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">opppy.plotting_help</span> <span class="k">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">my_test_opppy_tally_parser</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    An example OPPPY parser that can extract simple cycle string</span>
<span class="sd">    data and return a cycle tally dictionary</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="c1"># initialize the cycle parsing data</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">sort_key_string</span> <span class="o">=</span> <span class="s1">&#39;cycle&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">cycle_opening_string</span> <span class="o">=</span> <span class="s2">&quot;cycle&quot;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">cycle_closing_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">file_end_string</span> <span class="o">=</span> <span class="kc">None</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initializing my_test_opppy_tally_parser&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse_cycle_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cycle_string</span><span class="p">):</span>
      <span class="n">cycle_data_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bins&#39;</span><span class="p">,</span><span class="s1">&#39;odd_counts&#39;</span><span class="p">,</span><span class="s1">&#39;even_counts&#39;</span><span class="p">]</span>
      <span class="n">cycle_info_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">]</span>
      <span class="c1"># return dictionary of dictionaries </span>
      <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">problem_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info_keys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info_keys</span>
      <span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_data_keys</span>
      <span class="n">cycle_info</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="c1"># initial internal dictionaries</span>
      <span class="n">counts</span> <span class="o">=</span> <span class="p">{}</span>

      <span class="c1"># parse string and build up dictionaries</span>
      <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">cycle_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
           <span class="c1"># get cycle info</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">cycle_info_keys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">cycle_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># get tally info</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">cycle_data_keys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">counts</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">str_vector_to_float_vector</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]))</span>
                    <span class="c1"># add the total counts for this cycle</span>
                    <span class="k">if</span> <span class="s1">&#39;counts&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;n_&quot;</span><span class="o">+</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

                    <span class="c1"># store problem data</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="s1">&#39;bins&#39;</span><span class="p">:</span>
                        <span class="n">problem_data_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">str_vector_to_float_vector</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]))</span>
                        <span class="n">problem_data_dict</span><span class="p">[</span><span class="s1">&#39;number_of_bins&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">problem_data_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
       
    
      <span class="c1"># append the sub-dictionaries</span>
      <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;problem_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">problem_data_dict</span>
      <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;cycle_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cycle_info</span>
      <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;cool_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span>

      <span class="k">return</span> <span class="n">data_dict</span>
        
</pre></div>
</div>
<p>We can now build up data_dump dictionary using the opppy.dump_utils functions and plot the data using the opppy.plot_dump_dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env pyton</span>
<span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   test_tally_plotting.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="k">import</span> <span class="n">support</span>
<span class="kn">import</span> <span class="nn">shlex</span>

<span class="kn">from</span> <span class="nn">opppy.tally</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.plot_dictionary</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.version</span> <span class="k">import</span> <span class="n">__version__</span>

<span class="k">class</span> <span class="nc">test_dict_plotting</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
 
  <span class="k">def</span> <span class="nf">test_plot_tally</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This test the append_pickle function</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">from</span> <span class="nn">my_test_opppy_tally_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_tally_parser</span>

    <span class="c1"># initialize the parser</span>
    <span class="n">opppy_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_tally_parser</span><span class="p">()</span>
  
    <span class="c1"># initialize a new data dictionary</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
  
    <span class="c1"># Append the thrid output file</span>
    <span class="n">output_files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;example_tally1.txt&quot;</span><span class="p">,</span><span class="s2">&quot;example_tally2.txt&quot;</span><span class="p">,</span><span class="s2">&quot;example_tally3.txt&quot;</span><span class="p">]</span>
    <span class="c1"># Build initial pickle</span>
    <span class="n">append_tally_dictionary</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">opppy_parser</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    
    <span class="n">ploter</span> <span class="o">=</span> <span class="n">plot_dictionary</span><span class="p">()</span>
    
    <span class="n">plot_time</span> <span class="o">=</span> <span class="mf">6.0</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">time</span> <span class="o">&gt;=</span> <span class="n">plot_time</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="n">plot_string</span> <span class="o">=</span> <span class="s2">&quot;-dn cool_counts -y odd_counts -y even_counts -x bins&quot;</span> <span class="c1"># -sa test.png --hide_plot&quot;</span>

    <span class="c1"># generate the plotting arguments</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">ploter</span><span class="o">.</span><span class="n">parse_input_string</span><span class="p">(</span><span class="n">plot_string</span><span class="p">)</span>
    
    <span class="c1"># check if data is available </span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is data available &quot;</span><span class="p">,</span><span class="n">ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

    <span class="c1"># generate a plot given my plotting arguments, dictionary, and data name</span>
    <span class="n">ploter</span><span class="o">.</span><span class="n">plot_dict</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">],</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="s2">&quot;my_test_dict t =&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]),</span> <span class="s2">&quot;my_test_dict t =&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">][</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])])</span>


    


<span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
  <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">test_dict_plotting</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">test_main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-an-interactive-commandline-opppy-ploter">
<h2><a class="toc-backref" href="#id5">Building an Interactive Commandline OPPPY Ploter</a><a class="headerlink" href="#building-an-interactive-commandline-opppy-ploter" title="Permalink to this headline">¶</a></h2>
<p>OPPPY provides some useful interactive plotting functions (see
opppy.interactive_utils) to build a user defined command line based plotting
tool with pre-formatted plots.  To demonstrate this capability we will build an
example command line plotter using the example user defined OPPPY parsers
above.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   my_interactive_parser.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="k">import</span> <span class="n">support</span>
<span class="kn">import</span> <span class="nn">shlex</span>

<span class="kn">from</span> <span class="nn">opppy.interactive_utils</span> <span class="k">import</span> <span class="o">*</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">This is an example interactive parser that can be build up with OPPPY</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Interactive test parser for fancy plotting&quot;</span><span class="p">)</span>
<span class="n">subparser</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;options&#39;</span><span class="p">)</span>

<span class="c1"># import the test parser</span>
<span class="kn">from</span> <span class="nn">my_test_opppy_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_parser</span>

<span class="c1"># initialize the output parser</span>
<span class="n">opppy_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_parser</span><span class="p">()</span>

<span class="n">option_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">option_string</span> <span class="o">=</span> <span class="n">option_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Density; -dn density -x time -xlab &quot;time [s]&quot;  -y select_key  -ylab &quot;Density&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="n">option_string</span> <span class="o">=</span> <span class="n">option_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Test Data 1; -dn test_data1 -x time -xlab &quot;time [s]&quot;  -y test_data1          -ylab &quot;Test Data 1&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="n">option_string</span> <span class="o">=</span> <span class="n">option_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Test Data 2; -dn test_data1 -x time -xlab &quot;time [s]&quot;  -y test_data2          -ylab &quot;Test Data 2&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>

<span class="c1"># setup the interactive output parser</span>
<span class="n">output_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Interactive output parser&#39;</span><span class="p">)</span>
<span class="n">output_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">output_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>
<span class="n">o_parser</span> <span class="o">=</span> <span class="n">interactive_output_parser</span><span class="p">(</span><span class="n">opppy_parser</span><span class="p">,</span> <span class="n">option_string</span><span class="p">,</span> <span class="n">output_parser</span><span class="p">)</span>


<span class="c1"># initialize the dump parser</span>
<span class="kn">from</span> <span class="nn">my_test_opppy_dump_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_dump_parser</span>

<span class="c1"># initialize the dump parser</span>
<span class="n">opppy_dump_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_dump_parser</span><span class="p">()</span>

<span class="c1"># setup the interactive dump parser</span>
<span class="n">dump_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;dump&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Interactive dump parser&#39;</span><span class="p">)</span>
<span class="n">dump_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">dump_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>

<span class="n">d_parser</span> <span class="o">=</span> <span class="n">interactive_dump_parser</span><span class="p">(</span><span class="n">opppy_dump_parser</span><span class="p">,</span> <span class="n">dump_parser</span><span class="p">)</span>

<span class="c1"># initialize the hdf parser</span>
<span class="kn">from</span> <span class="nn">my_test_opppy_hdf_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_hdf_parser</span>

<span class="c1"># initialize the dump parser</span>
<span class="n">opppy_hdf_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_hdf_parser</span><span class="p">()</span>

<span class="c1"># setup the interactive dump parser</span>
<span class="n">hdf_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;hdf&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Interactive hdf parser&#39;</span><span class="p">)</span>
<span class="n">hdf_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">hdf_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>

<span class="n">h_parser</span> <span class="o">=</span> <span class="n">interactive_dump_parser</span><span class="p">(</span><span class="n">opppy_hdf_parser</span><span class="p">,</span> <span class="n">hdf_parser</span><span class="p">)</span>

<span class="c1"># initialize the output parser</span>
<span class="kn">from</span> <span class="nn">my_test_opppy_tally_parser</span> <span class="k">import</span> <span class="n">my_test_opppy_tally_parser</span>

<span class="c1"># initialize the output parser</span>
<span class="n">opppy_tally_parser</span> <span class="o">=</span> <span class="n">my_test_opppy_tally_parser</span><span class="p">()</span>


<span class="n">tally_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">tally_string</span> <span class="o">=</span> <span class="n">tally_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Cool Counts; -sk time -dn cool_counts -x bins -xlab &quot;bin [#]&quot;  -y select_key  -ylab &quot;Counts [#]&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="n">tally_string</span> <span class="o">=</span> <span class="n">tally_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Odd Counts; -sk cycle -dn cool_counts -x bins -xlab &quot;bin [#]&quot;  -y odd_counts  -ylab &quot;Counts [#]&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="n">tally_string</span> <span class="o">=</span> <span class="n">tally_string</span> <span class="o">+</span> <span class="s1">&#39;Plot Even Counts; -sk time -dn cool_counts -x bins -xlab &quot;bin [#]&quot;  -y even_counts  -ylab &quot;Counts [#]&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span>


<span class="c1"># setup the interactive tally parser</span>
<span class="n">tally_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;tally&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Interactive tally parser&#39;</span><span class="p">)</span>
<span class="n">tally_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">tally_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">)</span>
<span class="n">t_parser</span> <span class="o">=</span> <span class="n">interactive_tally_parser</span><span class="p">(</span><span class="n">opppy_tally_parser</span><span class="p">,</span> <span class="n">tally_string</span><span class="p">,</span> <span class="n">tally_parser</span><span class="p">)</span>





<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">args</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the example files above this example interactive parsing tool can be used:
* build up python Pickle data files for rapid repeated plotting or alternative</p>
<blockquote>
<div>python scripting</div></blockquote>
<ul class="simple">
<li>directly plot data either from a pickle file or directly parsing data files</li>
<li>interactive plotting based on a pre-defined plotting command</li>
</ul>
<p>The following simple ‘input_scripts’ are used for the interactive examples shown below:</p>
<p>interactive_input.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> 
<span class="mi">1</span>
<span class="o">-</span><span class="n">sa</span> <span class="n">density</span><span class="o">.</span><span class="n">png</span>
<span class="o">-</span><span class="n">q</span>
</pre></div>
</div>
<p>interactive_tally_input.txt</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> 
<span class="mi">5</span>
<span class="mi">1</span>
<span class="o">-</span><span class="n">sa</span> <span class="n">odd_count</span><span class="o">.</span><span class="n">png</span>
<span class="o">-</span><span class="n">q</span>
</pre></div>
</div>
<p>Example of using the interactive user defined command line parser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env pyton</span>
<span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   test_interactive.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">test</span> <span class="k">import</span> <span class="n">support</span>
<span class="kn">import</span> <span class="nn">shlex</span>

<span class="k">class</span> <span class="nc">test_interactive_utils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This test an example interactive plotter build with the</span>
<span class="sd">    interactive_output_parser class</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">test_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally pickle -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally iplot -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally plot -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output pickle -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output iplot -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output plot -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump pickle -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 1d -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 2d -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 3d -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -h&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump line -h&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_pickle_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output pickle -pf interactive.p -of output_example*.txt&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_plot_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output pickle -pf interactive.p -of output_example*.txt&quot;</span><span class="p">)</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output iplot -pf interactive.p &lt; interactive_input.txt&quot;</span><span class="p">)</span>
        <span class="c1"># parse and plot the output data files</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output iplot -of output_example*.txt &lt; interactive_input.txt&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_plot_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output pickle -pf interactive.p -of output_example*.txt&quot;</span><span class="p">)</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output plot -pf interactive.p -dn density -x time -y mat1 -sa density_mat1.png -hp&quot;</span><span class="p">)</span>
        <span class="c1"># parse and plot the output data files</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py output plot -of output_example*.txt -dn density -x time -y mat1 -sa density_mat1_pp.png -hp&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_pickle_dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the dump data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump pickle -pf interactive_dump.p -df example_dump*.txt&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_plot_dump</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the dump data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump pickle -pf interactive_dump.p -df example_dump*.txt&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and plot a 1d dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 1d -dn example_dump.txt -x cell_id -y temperature&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and plot a 1d dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 1d -dn example_dump.txt -x cell_id -y temperature -kw cell_id temperature&quot;</span><span class="p">)</span>

        <span class="c1"># plot a 1d dump from a pickle file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 1d -dn example_dump.txt -pf interactive_dump.p -x cell_id -y temperature&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and plot a 2d dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 2d -dn example_dump.txt -x cell_id -y z -d temperature&quot;</span><span class="p">)</span>

        <span class="c1"># plot 2d dump from pickle file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 2d -dn example_dump.txt -pf interactive_dump.p -x cell_id -y z -d density&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and plot a 2d dump only extract key_words</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 2d -dn example_dump.txt -x cell_id -y z -d temperature -kw temperature cell_id z&quot;</span><span class="p">)</span>

        <span class="c1"># plot slice of 3d dump from dump file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 3d -dn example_dump.txt -x z -y y -z x -zs 5.0 -d temperature&quot;</span><span class="p">)</span>

        <span class="c1"># plot slice of 3d dump from pickle file</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump 3d -dn example_dump.txt -pf interactive_dump.p -x z -y y -z x -zs 5.0 -d temperature&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_dump_series</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the dump data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump pickle -pf interactive_dump.p -df example_dump*.txt&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and plot a point series</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -df example_dump*.txt -df example_dump*.txt -dk x -p 5 -s time -d temperature -sy 10.0 -sy 1.0&quot;</span><span class="p">)</span>

        <span class="c1"># test individual scale x</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -df example_dump*.txt -df example_dump*.txt -dk x -p 5 -s time -d temperature -sx 10.0 -sx 1.0&quot;</span><span class="p">)</span>

        <span class="c1"># test scale all x</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -df example_dump*.txt -df example_dump*.txt -dk x -p 5 -s time -d temperature -sx 10.0&quot;</span><span class="p">)</span>

        <span class="c1"># test scale all y</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -df example_dump*.txt -df example_dump*.txt -dk x -p 5 -s time -d temperature -sy 10.0&quot;</span><span class="p">)</span>

        <span class="c1"># plot a point series from a pickled dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump point -pf interactive_dump.p interactive_dump.p -dk x -p 5 -s time -d temperature&quot;</span><span class="p">)</span>

        <span class="c1"># plot a line series from a pickled dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump line -pf interactive_dump.p interactive_dump.p -dk x -p0 1 -p1 5 -s time -d temperature&quot;</span><span class="p">)</span>

        <span class="c1"># plot a contour series from a pickled dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump contour -pf interactive_dump.p -dk x y -s time -d temperature -np 5&quot;</span><span class="p">)</span>

        <span class="c1"># plot a contour series slice from a 3d pickled dump</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py dump contour -pf interactive_dump.p -dk z y x -zs 5 -s time -d temperature&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_pickle_tally</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally pickle -pf interactive_tally.p -of example_tally*.txt&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_plot_tally</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally pickle -pf interactive_tally.p -tf example_tally*.txt&quot;</span><span class="p">)</span>
        <span class="c1"># This uses glob to pickle all the output data</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally iplot -pf interactive_tally.p &lt; interactive_tally_input.txt&quot;</span><span class="p">)</span>
        <span class="c1"># parse and plot the output data files</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally iplot -tf example_tally*.txt &lt; interactive_tally_input.txt&quot;</span><span class="p">)</span>
        <span class="c1"># parse and plot the output data files</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally plot -tf example_tally*.txt -sk cycle -dn cool_counts -x bins -xlab &#39;bin [#]&#39;  -y odd_counts  -ylab &#39;Counts [#]&#39;&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally plot -pf interactive_tally.p -sk time -sv 5.0 -dn cool_counts -x bins -xlab &#39;bin [#]&#39;  -y even_counts  -ylab &#39;Counts [#]&#39;&quot;</span><span class="p">)</span>
        <span class="c1"># test scaling and log axis</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;python my_interactive_parser.py tally plot -tf example_tally*.txt -tf example_tally*.txt -sk cycle -dn cool_counts -x bins -xlab &#39;bin [#]&#39;  -y odd_counts  -ylab &#39;Counts  [#]&#39; -lx -ly -sx 10 -sx 1e-3 -sy 10 -sy 1e-3 -xl 0.00001 1000 -yl 0.00001 10000&quot;</span><span class="p">)</span>


 

<span class="k">def</span> <span class="nf">test_main</span><span class="p">():</span>
  <span class="n">support</span><span class="o">.</span><span class="n">run_unittest</span><span class="p">(</span><span class="n">test_interactive_utils</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="opppy.html" class="btn btn-neutral float-right" title="opppy package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to OPPPY’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Mathew Cleveland.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>